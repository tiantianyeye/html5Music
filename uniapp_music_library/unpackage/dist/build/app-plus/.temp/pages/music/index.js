require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([5],{19:function(t,i,e){"use strict";var s=a(e(2)),n=a(e(20));function a(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(n.default))},20:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e(22),n=e.n(s),a=e(26);var o=function(t){e(21)},r=e(0)(n.a,a.a,o,"data-v-062c6424",null);i.default=r.exports},21:function(t,i){},22:function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0});var s,n=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},a=e(7),o=(s=a)&&s.__esModule?s:{default:s},r=e(3),c=e(4),l=e(6);function u(t){if(Array.isArray(t)){for(var i=0,e=Array(t.length);i<t.length;i++)e[i]=t[i];return e}return Array.from(t)}i.default={data:function(){return{keyword:"",swiperImgs:["/static/img/banner1.jpg","/static/img/banner2.jpg","/static/img/banner3.jpg"],recommendMusic:["38度6","沙漠骆驼","离人愁","我们不一样","逆流成河","带你去旅行"],nomore:!1,firstInit:!0,currentPage:1,showSeahchDiv:!1,searchTipList:[],chooseIndex:0,bgAudioMannager:"",playDivShow:!1}},computed:n({},(0,l.mapGetters)(["songList","musicDetailInfo","isPlaying"])),components:{MyNoMore:o.default},mounted:function(){this.bgAudioMannager=this.globalData.bgAudioMannager,this.setMusicMonitor()},methods:{onSearchKeyword:function(){var t=this,i=this.keyword.trim();i&&(t.showSeahchDiv=!0,(0,r.get)(c.searchTipUrl,{keyword:i}).then(function(i){t.searchTipList=i[0].RecordDatas,0==t.searchTipList.length&&(t.showSeahchDiv=!1)}).catch(function(t){console.log(t)}))},toSearchSong:function(t){this.keyword=t,this.showSeahchDiv=!1,this.searchTipList=[],this.initData(),this.getSongList()},getSongList:function(){var t=this;this.nomore||(0,r.get)(c.songsearchUrl,{page:t.currentPage,pagesize:20,keyword:t.keyword,platform:"WebFilter",userid:-1,iscorrection:1,privilege_filter:0,filter:2}).then(function(i){var e=Math.ceil(i.total/20),s=i.lists,n=[].concat(u(t.songList),u(s));t.$store.dispatch("setSongList",n),t.firstInit=!1,t.currentPage++,t.currentPage>e&&e>1&&(t.nomore=!0),t.$forceUpdate()})},initData:function(){this.currentPage=1,this.nomore=!1,this.firstInit=!0,this.$store.dispatch("setSongList",[])},getSongDetailInfo:function(t){var i=this;i.chooseIndex=t;var e=i.songList[t].FileHash;(0,r.get)(c.playUrl,{r:"play/getdata",hash:e}).then(function(t){i.$store.dispatch("setSongDetailInfo",t),i.playMusic()})},playMusic:function(){this.playDivShow=!0,this.$store.dispatch("setMusicPlay");var t=this.musicDetailInfo;this.bgAudioMannager.stop(),this.bgAudioMannager.title=t.song_name,this.bgAudioMannager.singer=t.author_name,this.bgAudioMannager.coverImgUrl=t.img,this.bgAudioMannager.src=t.play_url,this.bgAudioMannager.play()},onMusicTap:function(){this.isPlaying?(this.bgAudioMannager.pause(),this.$store.dispatch("setMusicPause")):(this.bgAudioMannager.play(),this.$store.dispatch("setMusicPlay"))},prevSong:function(){var t=this.chooseIndex-1;t=t<0?0:t,this.getSongDetailInfo(t)},nextSong:function(){var t=this.chooseIndex+1;t=t>=this.songList.length?0:t,this.getSongDetailInfo(t)},openPlayer:function(){t.navigateTo({url:"/pages/musicplayer/index?index="+this.chooseIndex})},setMusicMonitor:function(){var t=this;this.bgAudioMannager.onPlay(function(){t.$store.dispatch("setMusicPlay")}),this.bgAudioMannager.onPause(function(){t.$store.dispatch("setMusicPause")}),this.bgAudioMannager.onPrev(function(){t.prevSong()}),this.bgAudioMannager.onNext(function(){t.nextSong()}),this.bgAudioMannager.onEnded(function(){t.$store.dispatch("setMusicPause");var i=t.chooseIndex+1;i=i>=t.songList.length?0:i,t.chooseIndex=i,t.getSongDetailInfo(i)})}},onPullDownRefresh:function(){t.hideLoading(),t.stopPullDownRefresh(),t.hideNavigationBarLoading(),this.initData(),this.getSongList()},onReachBottom:function(){this.getSongList()}}}).call(i,e(1).default)},26:function(t,i,e){"use strict";var s={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"music-container"},[e("div",{staticClass:"header-div"},[e("div",{staticClass:"header-top1"},[t._m(0),e("div",{staticClass:"top-right"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],attrs:{type:"text",placeholder:"歌手/歌名","placeholder-style":"color:#e5e5e5;",eventid:"Rvy-0"},domProps:{value:t.keyword},on:{confirm:t.onSearchKeyword,input:function(i){i.target.composing||(t.keyword=i.target.value)}}}),e("i",{staticClass:"iconfont icon-sousuo",attrs:{eventid:"CKG-1"},on:{click:t.onSearchKeyword}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.showSeahchDiv,expression:"showSeahchDiv"}],staticClass:"tip-div"},[e("ul",t._l(t.searchTipList,function(i,s,n){return e("li",{key:n,attrs:{eventid:"82n-2-"+s},on:{click:function(e){t.toSearchSong(i.HintInfo)}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(i.HintInfo)+"\n\t\t\t\t\t\t")])}))],1)],1)]),e("div",{staticClass:"header-top2"},[e("swiper",{attrs:{circular:"true","indicator-dots":"true",autoplay:"true",interval:"3000",duration:"500","indicator-color":"#2ca2f9","indicator-active-color":"#d1c90e"}},t._l(t.swiperImgs,function(t,i,s){return e("swiper-item",{key:s,attrs:{mpcomid:"mz1-0-"+i}},[e("view",{staticClass:"swiper-item"},[e("image",{attrs:{src:t,mode:"scaleToFill"}})])])}))],1)]),e("div",{staticClass:"space-div"}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.songList&&t.songList.length>0,expression:"songList && songList.length>0"}],staticClass:"music-div"},[e("ul",t._l(t.songList,function(i,s,n){return e("li",{key:n,attrs:{eventid:"HKv-3-"+s},on:{click:function(i){i.stopPropagation(),t.getSongDetailInfo(s)}}},[e("div",{staticClass:"text"},[e("p",[t._v(t._s(i.SongName))]),e("p",{staticClass:"singer"},[t._v(t._s(i.SingerName))])],1)])}))],1),e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.songList.length,expression:"songList.length==0"}],staticClass:"music-div"},[e("ul",t._l(t.recommendMusic,function(i,s,n){return e("li",{key:n,attrs:{eventid:"FQU-4-"+s},on:{click:function(e){e.stopPropagation(),t.toSearchSong(i)}}},[e("div",{staticClass:"text"},[e("p",[t._v(t._s(i))])],1)])}))],1),t.playDivShow?e("div",{staticClass:"play-div",attrs:{eventid:"INk-8"},on:{click:t.openPlayer}},[e("div",{staticClass:"img-div",class:{run:t.isPlaying}},[e("image",{attrs:{src:t.musicDetailInfo.img}})]),e("div",{staticClass:"music-info"},[e("p",[t._v(t._s(t.musicDetailInfo.song_name))]),e("p",{staticClass:"singer"},[t._v(t._s(t.musicDetailInfo.author_name))])],1),e("div",{staticClass:"play-components"},[e("i",{staticClass:"iconfont icon-kuaijin-copy prev",attrs:{eventid:"59s-5"},on:{click:function(i){i.stopPropagation(),t.prevSong(i)}}}),e("i",{staticClass:"iconfont lay",class:[t.isPlaying?"icon-Icon-pause":"icon-zanting"],attrs:{eventid:"8H2-6"},on:{click:function(i){i.stopPropagation(),t.onMusicTap(i)}}}),e("i",{staticClass:"iconfont icon-kuaijin next",attrs:{eventid:"JJF-7"},on:{click:function(i){i.stopPropagation(),t.nextSong(i)}}})],1)]):t._e(),e("MyNoMore",{attrs:{toShow:t.nomore&&!t.firstInit,mpcomid:"yTH-1"}})],1)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"top-left"},[i("span",{staticClass:"text1"},[this._v("M")]),i("span",{staticClass:"text2"},[this._v("我的音乐")])])}]};i.a=s}},[19]);
require("../../common/manifest.js");
require("../../common/vendor.js");
global.webpackJsonp([6],{62:function(t,e,s){"use strict";var a=n(s(2)),o=n(s(63));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(o.default))},63:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(65),o=s.n(a),n=s(66),i=!1;var r=function(t){i||s(64)},l=s(0)(o.a,n.a,r,"data-v-6d2f0cf0",null);l.options.__file="E:\\我的资料\\mytest\\uniapp\\我的音乐 - 副本\\pages\\detail\\index.vue",l.esModule&&Object.keys(l.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),l.options.functional&&console.error("[vue-loader] index.vue: functional components are not supported with templates, they should use render functions."),e.default=l.exports},64:function(t,e){},65:function(t,e,s){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a,o=s(3),n=s(4),i=s(8),r=(a=i)&&a.__esModule?a:{default:a};e.default={data:function(){return{userInfo:{},isbn:"",info:{},comment:"",location:"",phoneMode:""}},mounted:function(){this.isbn=this.$root.$mp.query.isbn,this.userInfo=t.getStorageSync("userInfo"),this.getDetail(),this.getPhone()},components:{MyRate:r.default},methods:{getDetail:function(){var e=this;(0,o.post)(n.bookDetailUrl,{isbn:e.isbn}).then(function(s){if(console.log(s),s){var a=s;a.tags=a.tags.split(","),a.summary=a.summary.trim().split("\n"),e.info=a,t.setNavigationBarTitle({title:a.bookname.slice(0,15)})}else(0,o.showToast)("书籍不存在")},!0)},getGeo:function(e){if(this.location)this.location="";else{var s=this;t.getLocation({success:function(e){var a=e.latitude,o=e.longitude;if(a&&o){t.request({url:"https://api.map.baidu.com/geocoder/v2/",data:{location:a+","+o,ak:"Y7W2Yg6SNMF3HYF6GWGcoH4tLzC2gCZP",output:"json"},method:"GET",success:function(t){if(200===t.statusCode){var e=t.data.result.addressComponent.city;s.location=e}else s.location="未知地点"}})}}})}},getPhone:function(){var t=wx.getSystemInfoSync();this.phoneMode=t.model},addComment:function(){var e=this.comment.trim();if(e){e=e.replace(/[\<\>]/g,"");var s={uid:this.userInfo.uid,uploadPersonName:this.userInfo.nickName,isbn:this.isbn,phoneMode:this.phoneMode,location:this.location||"",comment:e,bookname:this.info.bookname};(0,o.post)(n.bookAddComment,s).then(function(e){"OK"==e.data?t.showToast({title:"评论成功"}):"Exists"==e.data&&t.showModal({title:"已经评论过了",content:"",showCancel:!1})},!0)}}},onShareAppMessage:function(){return{title:this.info.bookname,desc:"分享给您一本好书:"+this.info.bookname,path:"/pages/detail/main?isbn="+this.info.ISBN}}}}).call(e,s(1).default)},66:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-div"},[s("div",{staticClass:"thumb"},[s("img",{staticClass:"back",attrs:{src:t.info.imgUrl,alt:"",mode:"aspectFill"}}),s("div",{staticClass:"front-div"},[s("img",{staticClass:"small-img",attrs:{src:t.info.imgUrl,alt:"",mode:"aspectFit"}}),s("p",{staticClass:"bookname"},[t._v(t._s(t.info.bookname))]),s("p",{staticClass:"author"},[t._v(t._s(t.info.author))])],1)]),s("div",{staticClass:"owner"},[s("div",{staticClass:"left person-div"},[s("img",{attrs:{src:t.info.avatar,mode:"aspectFit"}}),s("span",{staticClass:"nickname"},[t._v(t._s(t.info.uploadPersonName))])]),s("span",{staticClass:"right"},[t._v("\n            "+t._s(t.info.rate)+"分 "),s("MyRate",{attrs:{value:t.info.rate,mpcomid:"3dN-0"}})],1),s("div",{staticClass:"publish-info clear"},[s("span",[t._v(t._s(t.info.publisher))]),s("span",{staticClass:"right"},[t._v(t._s(t.info.price)+"元")])]),s("div",{staticClass:"tags-info clear"},t._l(t.info.tags,function(e,a){return s("span",{key:a,staticClass:"badge"},[t._v("\n                "+t._s(e)+"\n            ")])})),s("div",{staticClass:"summary clear"},t._l(t.info.summary,function(e,a){return s("p",{key:a},[t._v("\n                "+t._s(e)+"\n            ")])}))]),s("div",{staticClass:"comment"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"textarea",attrs:{maxlength:"100",placeholder:"sorry个人开发者，不允许评论模块。",disabled:"true",eventid:"Jcw-0"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),s("div",{staticClass:"phone"},[t._v("\n            手机型号：\n            "),s("span",{staticClass:"text-primary"},[t._v(t._s(t.phoneMode))])]),s("div",{staticClass:"location"},[t._v("\n            地理位置：\n            "),s("switch",{staticClass:"right",attrs:{color:"#EA5A49",eventid:"URY-1"},on:{click:t.getGeo}}),s("span",{staticClass:"text-primary"},[t._v(t._s(t.location))])])]),s("button",{staticClass:"btn",attrs:{"open-type":"share"}},[t._v("转发给好友")])],1)};a._withStripped=!0;var o={render:a,staticRenderFns:[]};e.a=o}},[62]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/detail/index.js.map